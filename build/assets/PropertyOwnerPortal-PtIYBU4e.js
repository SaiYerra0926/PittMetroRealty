import{r as u,j as e,b as Qe}from"./ui-DVJ6EJIP.js";import{E as X,P as es}from"./PropertyDetailsModal-BFCWIAzh.js";import{C as P,a as S,B as N,b as ee,c as se,I as A}from"./input-ChnHsgXA.js";import{B as Z}from"./badge-wObxNSgV.js";import{H as F,T as ss,b as ts,c as me,d as pe,M as rs,B as as,a as ls}from"./tabs-DUZPA5lN.js";import{L as v,U as os}from"./label-BlUdLWb5.js";import{T as is}from"./textarea-CmIK9knB.js";import{S as Ne,a as Pe,b as Se,c as Ae,d as te}from"./select-5mcA49FD.js";import{c as D,e as ns,P as Fe,i as oe,b as cs,X as ds}from"./index-DkJHlla0.js";import{C as re}from"./camera-BwW8Bokx.js";import{S as Ce}from"./shield-Bhko-v2X.js";import{C as ze}from"./index-rgNyJsh6.js";import{D as he}from"./mail-DwvALy0y.js";import{S as ms}from"./search-Dh5MbrKN.js";import"./react-D3F3s8fL.js";import"./trending-up-Cezt1-uU.js";import"./index-aux-f1nc.js";import"./index-QAyEP8-S.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=D("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=D("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=D("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=D("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=D("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=D("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=D("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=D("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=D("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var xe="Progress",ue=100,[fs]=ns(xe),[js,gs]=fs(xe),De=u.forwardRef((p,l)=>{const{__scopeProgress:c,value:o=null,max:i,getValueLabel:h=ws,...f}=p;(i||i===0)&&!Le(i)&&console.error(vs(`${i}`,"Progress"));const g=Le(i)?i:ue;o!==null&&!_e(o,g)&&console.error(bs(`${o}`,"Progress"));const y=_e(o,g)?o:null,k=le(y)?h(y,g):void 0;return e.jsx(js,{scope:c,value:y,max:g,children:e.jsx(Fe.div,{"aria-valuemax":g,"aria-valuemin":0,"aria-valuenow":le(y)?y:void 0,"aria-valuetext":k,role:"progressbar","data-state":Ie(y,g),"data-value":y??void 0,"data-max":g,...f,ref:l})})});De.displayName=xe;var Ee="ProgressIndicator",ke=u.forwardRef((p,l)=>{const{__scopeProgress:c,...o}=p,i=gs(Ee,c);return e.jsx(Fe.div,{"data-state":Ie(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...o,ref:l})});ke.displayName=Ee;function ws(p,l){return`${Math.round(p/l*100)}%`}function Ie(p,l){return p==null?"indeterminate":p===l?"complete":"loading"}function le(p){return typeof p=="number"}function Le(p){return le(p)&&!isNaN(p)&&p>0}function _e(p,l){return le(p)&&!isNaN(p)&&p<=l&&p>=0}function vs(p,l){return`Invalid prop \`max\` of value \`${p}\` supplied to \`${l}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ue}\`.`}function bs(p,l){return`Invalid prop \`value\` of value \`${p}\` supplied to \`${l}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ue} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var qe=De,Ns=ke;const Be=u.forwardRef(({className:p,value:l,...c},o)=>e.jsx(qe,{ref:o,className:oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",p),...c,children:e.jsx(Ns,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(l||0)}%)`}})}));Be.displayName=qe.displayName;const Ps=Qe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ue=u.forwardRef(({className:p,variant:l,...c},o)=>e.jsx("div",{ref:o,role:"alert",className:oe(Ps({variant:l}),p),...c}));Ue.displayName="Alert";const Ss=u.forwardRef(({className:p,...l},c)=>e.jsx("h5",{ref:c,className:oe("mb-1 font-medium leading-none tracking-tight",p),...l}));Ss.displayName="AlertTitle";const $e=u.forwardRef(({className:p,...l},c)=>e.jsx("div",{ref:c,className:oe("text-sm [&_p]:leading-relaxed",p),...l}));$e.displayName="AlertDescription";const As=({photos:p,onPhotosChange:l,maxPhotos:c=20,maxSizePerPhoto:o=10,acceptedTypes:i=["image/jpeg","image/png","image/webp"],className:h=""})=>{const[f,g]=u.useState(!1),[y,k]=u.useState(!1),[M,R]=u.useState(0),[O,V]=u.useState(null),z=u.useRef(null),J=x=>i.includes(x.type)?x.size>o*1024*1024?`File size must be less than ${o}MB.`:null:`File type ${x.type} is not supported. Please use JPEG, PNG, or WebP.`,I=x=>{if(!x)return;V(null);const w=[],L=[];Array.from(x).forEach(T=>{const W=J(T);W?L.push(`${T.name}: ${W}`):p.length+w.length<c?w.push(T):L.push(`${T.name}: Maximum ${c} photos allowed.`)}),L.length>0&&V(L.join(`
`)),w.length>0&&l([...p,...w])},B=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?g(!0):x.type==="dragleave"&&g(!1)},H=x=>{x.preventDefault(),x.stopPropagation(),g(!1),I(x.dataTransfer.files)},Q=x=>{I(x.target.files)},ie=x=>{const w=p.filter((L,T)=>T!==x);l(w)},Y=()=>{k(!0),R(0);const x=setInterval(()=>{R(w=>w>=100?(clearInterval(x),k(!1),100):w+10)},200)},G=x=>URL.createObjectURL(x);return e.jsxs("div",{className:`space-y-6 ${h}`,children:[e.jsx(P,{className:`border-2 border-dashed transition-colors ${f?"border-primary bg-primary/5":"border-slate-300 hover:border-primary/50"}`,children:e.jsx(S,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:H,children:[e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600",children:[e.jsx(re,{className:"h-8 w-8"}),e.jsx("span",{className:"text-lg font-medium",children:"Upload Property Photos"})]}),e.jsxs("p",{className:"text-sm text-slate-500 text-center max-w-md",children:["Drag and drop your photos here, or click to browse. Maximum ",c," photos, ",o,"MB each."]}),e.jsxs(N,{type:"button",variant:"outline",onClick:()=>z.current?.click(),className:"mt-4",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Choose Photos"]}),e.jsx("input",{ref:z,type:"file",multiple:!0,accept:i.join(","),onChange:Q,className:"hidden"})]})})}),O&&e.jsxs(Ue,{variant:"destructive",children:[e.jsx(hs,{className:"h-4 w-4"}),e.jsx($e,{className:"whitespace-pre-line",children:O})]}),y&&e.jsx(P,{children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uploading photos..."}),e.jsxs("span",{children:[M,"%"]})]}),e.jsx(Be,{value:M,className:"h-2"})]})})}),p.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Uploaded Photos (",p.length,"/",c,")"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(N,{variant:"outline",size:"sm",onClick:Y,disabled:y,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Upload All"]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map((x,w)=>e.jsx(P,{className:"group relative overflow-hidden",children:e.jsx(S,{className:"p-0",children:e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:G(x),alt:`Property photo ${w+1}`,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[e.jsx(N,{size:"sm",variant:"secondary",onClick:()=>window.open(G(x),"_blank"),children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(N,{size:"sm",variant:"destructive",onClick:()=>ie(w),children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs(Z,{variant:"secondary",className:"text-xs",children:[(x.size/1024/1024).toFixed(1),"MB"]})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Z,{variant:"outline",className:"bg-white/90 text-slate-800",children:w+1})})]})})},w))})]}),p.length>0&&e.jsx(P,{children:e.jsxs(S,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Photo Categories"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Required Photos"}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Exterior front view"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Living room"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Kitchen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Master bedroom"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Recommended Photos"}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Backyard/garden"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Bathroom"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Garage/parking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Neighborhood view"})]})]})]})]})]})})]})};class Cs{baseUrl;constructor(l="http://localhost:3001/api"){this.baseUrl=l}async fetchData(l,c){const o=`${this.baseUrl}${l}`;try{const i=await fetch(o,{...c,headers:{"Content-Type":"application/json",...c?.headers}});if(!i.ok){const h=await i.json().catch(()=>({message:`API error: ${i.statusText}`}));throw new Error(h.message||`API error: ${i.statusText}`)}return await i.json()}catch(i){throw i instanceof TypeError&&(i.message.includes("fetch")||i.message.includes("Failed to fetch"))?(console.error(`Network error fetching from ${o}:`,i.message),new Error("Unable to connect to API server")):(console.error(`Error fetching from ${o}:`,i),i)}}async getProperties(l){try{const c=new URLSearchParams;l?.status&&c.append("status",l.status),l?.listingType&&c.append("listingType",l.listingType),l?.ownerEmail&&c.append("ownerEmail",l.ownerEmail),l?.limit&&c.append("limit",l.limit.toString()),l?.offset&&c.append("offset",l.offset.toString());const o=`/properties${c.toString()?`?${c.toString()}`:""}`,i=await this.fetchData(o),h="listings"in i?i:{listings:i.data||[],total:i.count||i.total||0};return localStorage.setItem("properties",JSON.stringify(h.listings)),h}catch(c){console.warn("Failed to fetch properties from API, attempting to load from localStorage.");const o=localStorage.getItem("properties");if(o)return{listings:JSON.parse(o),total:JSON.parse(o).length};throw c}}async getProperty(l){try{return(await this.fetchData(`/properties/${l}`)).listing}catch(c){console.warn("Failed to fetch property from API, attempting to load from localStorage.");const o=localStorage.getItem("properties");if(o){const h=JSON.parse(o).find(f=>f.id===l);if(h)return h}throw c}}async createProperty(l){try{const c={...l,photos:await Promise.all(l.photos.map(async f=>{if(f.file){const g=await this.fileToBase64(f.file);return{name:f.name,url:g,size:f.size,isBase64:!0}}return f}))},o={method:"POST",body:JSON.stringify(c)},i=await this.fetchData("/properties",o);localStorage.removeItem("properties"),localStorage.removeItem("propertyStats"),localStorage.removeItem("owner_listings");const h=i.listing||i;return{...h,photos:Array.isArray(h.photos)?h.photos:[],features:Array.isArray(h.features)?h.features:[],amenities:Array.isArray(h.amenities)?h.amenities:[]}}catch(c){throw console.error("Failed to create property:",c),c}}async updateProperty(l,c){try{const o={method:"PUT",body:JSON.stringify(c)},i=await this.fetchData(`/properties/${l}`,o);localStorage.removeItem("properties"),localStorage.removeItem("propertyStats"),localStorage.removeItem("owner_listings");const h=i.data||i;return{...h,photos:Array.isArray(h.photos)?h.photos.map(f=>({id:f.id,name:f.name||f.photo_name||"",url:f.url||f.photo_url||"",size:f.size||f.photo_size||0})):[],features:Array.isArray(h.features)?h.features:[],amenities:Array.isArray(h.amenities)?h.amenities:[]}}catch(o){throw console.error("Failed to update property:",o),o}}async deleteProperty(l){try{const c={method:"DELETE"};await this.fetchData(`/properties/${l}`,c),localStorage.removeItem("properties"),localStorage.removeItem("propertyStats"),localStorage.removeItem("owner_listings")}catch(c){throw console.error("Failed to delete property:",c),c}}async getPropertyStats(l){try{const c=l?`/properties/stats?ownerEmail=${l}`:"/properties/stats",o=await this.fetchData(c);return localStorage.setItem("propertyStats",JSON.stringify(o)),o}catch{console.warn("Failed to fetch property stats from API, attempting to load from localStorage.");const o=localStorage.getItem("propertyStats");return o?JSON.parse(o):{totalListings:0,publishedListings:0,pendingListings:0,approvedListings:0}}}async getPropertiesByOwner(l){try{const c=`/properties/owner?ownerEmail=${encodeURIComponent(l)}`,o=await this.fetchData(c);return o.listings&&o.listings.length>0&&localStorage.setItem("owner_listings",JSON.stringify(o.listings)),{listings:o.listings||[],total:o.total||0}}catch(c){console.warn("Failed to fetch properties by owner from API, attempting to load from localStorage.");const o=localStorage.getItem("owner_listings");if(o){const i=JSON.parse(o);return{listings:Array.isArray(i)?i:[],total:Array.isArray(i)?i.length:0}}throw c}}async getPublishedProperties(l){return this.getProperties({status:"Published",listingType:l})}fileToBase64(l){return new Promise((c,o)=>{const i=new FileReader;i.readAsDataURL(l),i.onload=()=>c(i.result),i.onerror=h=>o(h)})}base64ToFile(l,c,o="image/jpeg"){const i=l.split(","),h=i[0].match(/:(.*?);/)?.[1]||o,f=atob(i[1]);let g=f.length;const y=new Uint8Array(g);for(;g--;)y[g]=f.charCodeAt(g);return new File([y],c,{type:h})}}const Hs=()=>{const[p,l]=u.useState(!1),[c,o]=u.useState("login"),[i,h]=u.useState([]),[f,g]=u.useState(!1),[y,k]=u.useState({username:"",password:""}),[M,R]=u.useState(!1),[O,V]=u.useState(!1),[z,J]=u.useState(null),[I,B]=u.useState(!1),[H,Q]=u.useState(null),[ie,Y]=u.useState(null),[G,x]=u.useState(null),[w,L]=u.useState([]),[T,W]=u.useState(!1),[ne,ye]=u.useState(null),{toast:C}=cs(),U=new Cs,[r,$]=u.useState({title:"",description:"",address:"",city:"",state:"",zipCode:"",propertyType:"",bedrooms:0,bathrooms:0,squareFeet:0,yearBuilt:new Date().getFullYear(),lotSize:0,price:0,listingType:"rent",features:[],amenities:[],status:"Draft",availableDate:"",photos:[],ownerName:"",ownerEmail:"",ownerPhone:"",ownerPreferredContact:"email"}),[m,fe]=u.useState({}),je={username:"owner@pittmetro.com",password:"owner123"},Me=()=>{y.username===je.username&&y.password===je.password?(l(!0),o("dashboard")):alert("Invalid credentials. Please contact Pitt Metro Realty for access.")},b=(s,a)=>{$(t=>({...t,[s]:a})),m[s]&&fe(t=>({...t,[s]:""}))},ge=()=>{const s={};return r.title.trim()||(s.title="Property title is required"),r.description.trim()||(s.description="Property description is required"),r.address.trim()||(s.address="Address is required"),r.city.trim()||(s.city="City is required"),r.state.trim()||(s.state="State is required"),r.zipCode.trim()||(s.zipCode="ZIP code is required"),r.propertyType||(s.propertyType="Property type is required"),r.bedrooms<=0&&(s.bedrooms="Number of bedrooms is required"),r.bathrooms<=0&&(s.bathrooms="Number of bathrooms is required"),r.squareFeet<=0&&(s.squareFeet="Square footage is required"),r.price<=0&&(s.price="Price is required"),r.ownerName.trim()||(s.ownerName="Owner name is required"),r.ownerEmail.trim()||(s.ownerEmail="Owner email is required"),r.ownerPhone.trim()||(s.ownerPhone="Owner phone is required"),r.ownerEmail&&!/\S+@\S+\.\S+/.test(r.ownerEmail)&&(s.ownerEmail="Please enter a valid email"),r.photos.length===0&&(s.photos="At least one photo is required"),fe(s),Object.keys(s).length===0},[we,ve]=u.useState(!1);u.useEffect(()=>{p&&y.username&&!we&&(ce(),de(),ve(!0))},[p,y.username,we]);const ce=async()=>{V(!0);try{console.log("Fetching listings for:",y.username);const s=await U.getPropertiesByOwner(y.username);console.log("API Response:",s);const a=(s.listings||[]).map(t=>({id:t.id,title:t.title||"Untitled Listing",description:t.description||"",address:t.address||"",city:t.city||"",state:t.state||"",zipCode:t.zipCode||t.zip_code||"",propertyType:t.propertyType||t.property_type||"",bedrooms:t.bedrooms||0,bathrooms:t.bathrooms||0,squareFeet:t.squareFeet||t.square_feet||0,yearBuilt:t.yearBuilt||t.year_built,lotSize:t.lotSize||t.lot_size||0,price:t.price||0,listingType:t.listingType||t.listing_type||"rent",status:t.status||"Draft",availableDate:t.availableDate||t.available_date,photos:Array.isArray(t.photos)?t.photos.map(d=>({id:d.id,name:d.name||d.photo_name||"",url:d.url||d.photo_url||"",size:d.size||d.photo_size||0})):[],features:Array.isArray(t.features)?t.features:[],amenities:Array.isArray(t.amenities)?t.amenities:[],ownerName:t.ownerName||t.owner_name||"",ownerEmail:t.ownerEmail||t.owner_email||y.username,ownerPhone:t.ownerPhone||t.owner_phone||"",ownerPreferredContact:t.ownerPreferredContact||t.owner_preferred_contact||"email",submittedAt:t.submittedAt||t.submitted_at||t.createdAt||t.created_at,createdAt:t.createdAt||t.created_at,updatedAt:t.updatedAt||t.updated_at}));console.log("Normalized listings:",a),h(a),a.length>0&&localStorage.setItem("owner_listings",JSON.stringify(a))}catch(s){console.error("Error fetching listings from API:",s),console.log("Error details:",{message:s instanceof Error?s.message:"Unknown error",stack:s instanceof Error?s.stack:void 0});const a=localStorage.getItem("owner_listings");if(a)try{const t=JSON.parse(a),d=Array.isArray(t)?t.map(j=>({...j,photos:Array.isArray(j.photos)?j.photos:[],features:Array.isArray(j.features)?j.features:[],amenities:Array.isArray(j.amenities)?j.amenities:[]})):[];h(d),console.log("Loaded from localStorage:",d),C({title:"Warning",description:"Using cached listings. Unable to fetch latest updates.",variant:"default"})}catch(t){console.error("Error parsing localStorage listings:",t),h([])}else console.log("No listings found in API or localStorage"),h([])}finally{V(!1)}},Re=async()=>{if(!ge()){C({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}R(!0);try{const s={title:r.title,description:r.description,address:r.address,city:r.city,state:r.state,zipCode:r.zipCode,propertyType:r.propertyType,bedrooms:r.bedrooms,bathrooms:r.bathrooms,squareFeet:r.squareFeet,yearBuilt:r.yearBuilt,lotSize:r.lotSize||0,price:r.price,listingType:r.listingType,features:r.features,amenities:r.amenities,status:"Pending Review",availableDate:r.availableDate||void 0,photos:r.photos.map((d,j)=>d instanceof File?{id:j,name:d.name,url:"",size:d.size,file:d}:d.file?{id:d.id||j,name:d.name||d.file.name,url:d.url||"",size:d.size||d.file.size,file:d.file}:{id:d.id||j,name:d.name||"",url:d.url||"",size:d.size||0}),ownerName:r.ownerName,ownerEmail:r.ownerEmail,ownerPhone:r.ownerPhone,ownerPreferredContact:r.ownerPreferredContact||"email"},a=await U.createProperty(s);console.log("Created listing:",a);const t={...a,photos:Array.isArray(a.photos)?a.photos:[],features:Array.isArray(a.features)?a.features:[],amenities:Array.isArray(a.amenities)?a.amenities:[],zipCode:a.zipCode||a.zip_code||"",propertyType:a.propertyType||a.property_type||"",squareFeet:a.squareFeet||a.square_feet||0,yearBuilt:a.yearBuilt||a.year_built,lotSize:a.lotSize||a.lot_size||0,listingType:a.listingType||a.listing_type||"rent",availableDate:a.availableDate||a.available_date,submittedAt:a.submittedAt||a.submitted_at||a.createdAt||a.created_at,createdAt:a.createdAt||a.created_at,updatedAt:a.updatedAt||a.updated_at};h(d=>{const j=[...d,t];return localStorage.setItem("owner_listings",JSON.stringify(j)),j}),await ce(),g(!0),o("manage"),C({title:"Success!",description:"Property listing submitted successfully! Our team will review it within 24 hours."}),$({title:"",description:"",address:"",city:"",state:"",zipCode:"",propertyType:"",bedrooms:0,bathrooms:0,squareFeet:0,yearBuilt:new Date().getFullYear(),lotSize:0,price:0,listingType:"rent",features:[],amenities:[],status:"Draft",availableDate:"",photos:[],ownerName:"",ownerEmail:"",ownerPhone:"",ownerPreferredContact:"email"}),setTimeout(()=>g(!1),5e3)}catch(s){console.error("Error submitting listing:",s),C({title:"Submission Failed",description:s instanceof Error?s.message:"There was an error submitting your listing. Please try again.",variant:"destructive"})}finally{R(!1)}},Oe=s=>{J(s),$({title:s.title||"",description:s.description||"",address:s.address||"",city:s.city||"",state:s.state||"",zipCode:s.zipCode||"",propertyType:s.propertyType||"",bedrooms:s.bedrooms||0,bathrooms:s.bathrooms||0,squareFeet:s.squareFeet||0,yearBuilt:s.yearBuilt||new Date().getFullYear(),lotSize:s.lotSize||0,price:s.price||0,listingType:s.listingType||"rent",features:s.features||[],amenities:s.amenities||[],status:s.status||"Draft",availableDate:s.availableDate||"",photos:s.photos||[],ownerName:s.ownerName||"",ownerEmail:s.ownerEmail||"",ownerPhone:s.ownerPhone||"",ownerPreferredContact:s.ownerPreferredContact||"email"}),o("list")},be=()=>{J(null),$({title:"",description:"",address:"",city:"",state:"",zipCode:"",propertyType:"",bedrooms:0,bathrooms:0,squareFeet:0,yearBuilt:new Date().getFullYear(),lotSize:0,price:0,listingType:"rent",features:[],amenities:[],status:"Draft",availableDate:"",photos:[],ownerName:"",ownerEmail:"",ownerPhone:"",ownerPreferredContact:"email"})},Ve=async()=>{if(!z||!z.id){C({title:"Error",description:"No listing selected for update.",variant:"destructive"});return}if(!ge()){C({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}B(!0);try{const s={title:r.title,description:r.description,address:r.address,city:r.city,state:r.state,zipCode:r.zipCode,propertyType:r.propertyType,bedrooms:r.bedrooms,bathrooms:r.bathrooms,squareFeet:r.squareFeet,yearBuilt:r.yearBuilt,lotSize:r.lotSize||0,price:r.price,listingType:r.listingType,features:r.features,amenities:r.amenities,availableDate:r.availableDate||void 0,ownerName:r.ownerName,ownerEmail:r.ownerEmail,ownerPhone:r.ownerPhone,ownerPreferredContact:r.ownerPreferredContact||"email"},a=r.photos.filter(n=>n.url&&!n.file),t=r.photos.filter(n=>n.file),d=await Promise.all(t.map(async n=>{if(n.file){const _=await U.fileToBase64(n.file);return{name:n.name,url:_,size:n.size,isBase64:!0}}return n}));s.photos=[...a,...d];const j=await U.updateProperty(z.id,s),q=i.map(n=>n.id===z.id?j:n);h(q),localStorage.setItem("owner_listings",JSON.stringify(q)),C({title:"Success!",description:"Property listing updated successfully!"}),be()}catch(s){console.error("Error updating listing:",s),C({title:"Update Failed",description:s instanceof Error?s.message:"There was an error updating your listing. Please try again.",variant:"destructive"})}finally{B(!1)}},Je=s=>{$(a=>({...a,photos:a.photos.filter((t,d)=>d!==s)}))},He=s=>{console.log("Adding photos:",s.length),$(a=>{const t=s.map((j,q)=>({id:a.photos.length+q,name:j.name,url:"",size:j.size,file:j})),d=[...a.photos,...t];return console.log("Total photos after adding:",d.length),{...a,photos:d}})},Ye=async s=>{if(!s){C({title:"Error",description:"Listing ID is required to delete.",variant:"destructive"});return}Q(s);try{await U.deleteProperty(s);const a=i.filter(t=>t.id!==s);h(a),localStorage.setItem("owner_listings",JSON.stringify(a)),G?.id===s&&x(null),C({title:"Success!",description:"Property listing deleted successfully."}),Y(null)}catch(a){console.error("Error deleting listing:",a),C({title:"Delete Failed",description:a instanceof Error?a.message:"There was an error deleting your listing. Please try again.",variant:"destructive"})}finally{Q(null)}},Ge=s=>{x(s),Oe(s)},de=async()=>{W(!0);try{console.log("Fetching all listings from website...");const s=await U.getProperties();console.log("All listings response:",s);const a=(s.listings||[]).map(t=>({id:t.id,title:t.title||"Untitled Listing",description:t.description||"",address:t.address||"",city:t.city||"",state:t.state||"",zipCode:t.zipCode||t.zip_code||"",propertyType:t.propertyType||t.property_type||"",bedrooms:t.bedrooms||0,bathrooms:t.bathrooms||0,squareFeet:t.squareFeet||t.square_feet||0,yearBuilt:t.yearBuilt||t.year_built,lotSize:t.lotSize||t.lot_size||0,price:t.price||0,listingType:t.listingType||t.listing_type||"rent",status:t.status||"Draft",availableDate:t.availableDate||t.available_date,photos:Array.isArray(t.photos)?t.photos.map(d=>({id:d.id,name:d.name||d.photo_name||"",url:d.url||d.photo_url||"",size:d.size||d.photo_size||0})):[],features:Array.isArray(t.features)?t.features:[],amenities:Array.isArray(t.amenities)?t.amenities:[],ownerName:t.ownerName||t.owner_name||"",ownerEmail:t.ownerEmail||t.owner_email||"",ownerPhone:t.ownerPhone||t.owner_phone||"",ownerPreferredContact:t.ownerPreferredContact||t.owner_preferred_contact||"email",submittedAt:t.submittedAt||t.submitted_at||t.createdAt||t.created_at,createdAt:t.createdAt||t.created_at,updatedAt:t.updatedAt||t.updated_at}));console.log("Normalized all listings:",a),L(a)}catch(s){console.error("Error fetching all listings:",s);try{const d=localStorage.getItem("properties");if(d){const j=JSON.parse(d);if(Array.isArray(j)&&j.length>0){const q=j.map(n=>({id:n.id,title:n.title||"Untitled Listing",description:n.description||"",address:n.address||"",city:n.city||"",state:n.state||"",zipCode:n.zipCode||n.zip_code||"",propertyType:n.propertyType||n.property_type||"",bedrooms:n.bedrooms||0,bathrooms:n.bathrooms||0,squareFeet:n.squareFeet||n.square_feet||0,yearBuilt:n.yearBuilt||n.year_built,lotSize:n.lotSize||n.lot_size||0,price:n.price||0,listingType:n.listingType||n.listing_type||"rent",status:n.status||"Draft",availableDate:n.availableDate||n.available_date,photos:Array.isArray(n.photos)?n.photos.map(_=>({id:_.id,name:_.name||_.photo_name||"",url:_.url||_.photo_url||"",size:_.size||_.photo_size||0})):[],features:Array.isArray(n.features)?n.features:[],amenities:Array.isArray(n.amenities)?n.amenities:[],ownerName:n.ownerName||n.owner_name||"",ownerEmail:n.ownerEmail||n.owner_email||"",ownerPhone:n.ownerPhone||n.owner_phone||"",ownerPreferredContact:n.ownerPreferredContact||n.owner_preferred_contact||"email",submittedAt:n.submittedAt||n.submitted_at||n.createdAt||n.created_at,createdAt:n.createdAt||n.created_at,updatedAt:n.updatedAt||n.updated_at}));L(q),C({title:"Warning",description:`Using cached listings (${q.length} found). Unable to connect to API server. Start the server with "npm run server" to get fresh data.`,variant:"default"});return}}}catch(d){console.error("Error loading from cache:",d)}const a=s instanceof Error?s.message:"Unknown error",t=a.includes("connect")||a.includes("fetch")||a.includes("network");C({title:"Error",description:t?"Unable to connect to API server. Please start the server by running: npm run server":`Failed to fetch all listings: ${a}`,variant:"destructive"}),L([])}finally{W(!1)}},We=s=>{ye(s)},Xe=()=>{ye(null)},Ze=["Single Family Home","Condominium","Townhouse","Multi-Family","Apartment","Studio","Commercial","Land"],Ke=s=>{switch(s){case"Pending Review":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"Published":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return p?e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>{l(!1),ve(!1),J(null)},className:"flex items-center space-x-2",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-300"}),e.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center space-x-2",children:[e.jsx(F,{className:"h-6 w-6 text-primary"}),e.jsx("span",{children:"Property Owner Portal"})]})]}),e.jsxs(Z,{variant:"outline",className:"text-sm",children:[e.jsx(os,{className:"h-3 w-3 mr-1"}),"Owner Access"]})]})})}),f&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ze,{className:"h-5 w-5 text-green-400 mr-2"}),e.jsx("p",{className:"text-green-800 font-medium",children:"Property listing submitted successfully! Our team will review it within 24 hours."})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(ss,{value:c,onValueChange:o,className:"space-y-6",children:[e.jsxs(ts,{className:"grid w-full grid-cols-3",children:[e.jsxs(me,{value:"dashboard",className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(me,{value:"list",className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"List Property"})]}),e.jsxs(me,{value:"manage",className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Manage Listings"})]})]}),e.jsxs(pe,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Welcome to Your Property Portal"}),e.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto",children:"Manage your property listings, upload photos, and track your real estate portfolio with Pitt Metro Realty."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(P,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Listings"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:i.length})]}),e.jsx(F,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(P,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Active Listings"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:i.filter(s=>s.status==="Published").length})]}),e.jsx(X,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(P,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:i.filter(s=>s.status==="Pending Review").length})]}),e.jsx(Te,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(P,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Photos"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:i.reduce((s,a)=>s+a.photos.length,0)})]}),e.jsx(re,{className:"h-8 w-8 text-blue-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(P,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Quick Actions"})]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs(N,{className:"w-full justify-start",onClick:()=>o("list"),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"List New Property"]}),e.jsxs(N,{variant:"outline",className:"w-full justify-start",onClick:()=>o("manage"),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"View All Listings"]})]})]}),e.jsxs(P,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Security Notice"})]})}),e.jsxs(S,{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"This portal is secured and only accessible to verified property owners. All data is encrypted and protected."}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:"Secure Connection Active"})]})]})]})]})]}),e.jsx(pe,{value:"list",className:"space-y-6",children:e.jsxs(P,{className:"shadow-xl",children:[e.jsxs(ee,{className:"text-center pb-8",children:[e.jsxs(se,{className:"text-3xl font-bold text-slate-800 flex items-center justify-center space-x-3",children:[e.jsx(F,{className:"h-8 w-8 text-primary"}),e.jsx("span",{children:z?"Edit Property Listing":"List Your Property"})]}),e.jsx("p",{className:"text-slate-600 text-lg",children:z?"Update your property details and photos below":`Create a professional listing with photos to attract potential ${r.listingType==="rent"?"tenants":"buyers"}`})]}),e.jsx(S,{className:"p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-lg font-semibold mb-4 block",children:"Listing Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(P,{className:`cursor-pointer transition-all ${r.listingType==="rent"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>b("listingType","rent"),children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(he,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"For Rent"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Monthly rental listing"})]})}),e.jsx(P,{className:`cursor-pointer transition-all ${r.listingType==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>b("listingType","sell"),children:e.jsxs(S,{className:"p-4 text-center",children:[e.jsx(F,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"For Sale"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Property sale listing"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(v,{htmlFor:"title",children:"Property Title *"}),e.jsx(A,{id:"title",placeholder:"Beautiful 3BR/2BA Home in Prime Location",value:r.title,onChange:s=>b("title",s.target.value),className:m.title?"border-red-500":""}),m.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.title})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(v,{htmlFor:"description",children:"Property Description *"}),e.jsx(is,{id:"description",placeholder:"Describe your property's unique features...",rows:4,value:r.description,onChange:s=>b("description",s.target.value),className:m.description?"border-red-500":""}),m.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.description})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"address",children:"Street Address *"}),e.jsx(A,{id:"address",placeholder:"123 Main Street",value:r.address,onChange:s=>b("address",s.target.value),className:m.address?"border-red-500":""}),m.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.address})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"city",children:"City *"}),e.jsx(A,{id:"city",placeholder:"Pittsburgh",value:r.city,onChange:s=>b("city",s.target.value),className:m.city?"border-red-500":""}),m.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.city})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"state",children:"State *"}),e.jsx(A,{id:"state",placeholder:"PA",value:r.state,onChange:s=>b("state",s.target.value),className:m.state?"border-red-500":""}),m.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.state})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"zipCode",children:"ZIP Code *"}),e.jsx(A,{id:"zipCode",placeholder:"15213",value:r.zipCode,onChange:s=>b("zipCode",s.target.value),className:m.zipCode?"border-red-500":""}),m.zipCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.zipCode})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Property Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"propertyType",children:"Property Type *"}),e.jsxs(Ne,{value:r.propertyType,onValueChange:s=>b("propertyType",s),children:[e.jsx(Pe,{className:m.propertyType?"border-red-500":"",children:e.jsx(Se,{placeholder:"Select property type"})}),e.jsx(Ae,{children:Ze.map(s=>e.jsx(te,{value:s,children:s},s))})]}),m.propertyType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.propertyType})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"bedrooms",children:"Bedrooms *"}),e.jsx(A,{id:"bedrooms",type:"number",min:"0",value:r.bedrooms,onChange:s=>b("bedrooms",parseInt(s.target.value)||0),className:m.bedrooms?"border-red-500":""}),m.bedrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.bedrooms})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"bathrooms",children:"Bathrooms *"}),e.jsx(A,{id:"bathrooms",type:"number",min:"0",step:"0.5",value:r.bathrooms,onChange:s=>b("bathrooms",parseFloat(s.target.value)||0),className:m.bathrooms?"border-red-500":""}),m.bathrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.bathrooms})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"squareFeet",children:"Square Feet *"}),e.jsx(A,{id:"squareFeet",type:"number",min:"0",value:r.squareFeet,onChange:s=>b("squareFeet",parseInt(s.target.value)||0),className:m.squareFeet?"border-red-500":""}),m.squareFeet&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.squareFeet})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"price",children:"Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(A,{id:"price",type:"number",min:"0",placeholder:"0",value:r.price,onChange:s=>b("price",parseInt(s.target.value)||0),className:`pl-10 ${m.price?"border-red-500":""}`})]}),m.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.price})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"availableDate",children:"Available Date"}),e.jsx(A,{id:"availableDate",type:"date",value:r.availableDate,onChange:s=>b("availableDate",s.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Property Photos"}),r.photos.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:r.photos.map((s,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-slate-200 bg-slate-100",children:s.url?e.jsx("img",{src:s.url,alt:s.name||`Photo ${a+1}`,className:"w-full h-full object-cover"}):s.file?e.jsx("img",{src:URL.createObjectURL(s.file),alt:s.name||`Photo ${a+1}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(re,{className:"h-8 w-8 text-slate-400"})})}),e.jsx("button",{type:"button",onClick:()=>Je(a),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-red-600",title:"Delete photo",children:e.jsx(ae,{className:"h-4 w-4"})}),s.name&&e.jsx("p",{className:"text-xs text-slate-600 mt-1 truncate",title:s.name,children:s.name})]},a))}),e.jsx("div",{className:"mt-4",children:e.jsx(As,{photos:r.photos.filter(s=>s.file).map(s=>s.file),onPhotosChange:s=>{console.log("PhotoUpload callback - new photos:",s.length),He(s)},maxPhotos:20,maxSizePerPhoto:10})}),m.photos&&e.jsx("p",{className:"text-red-500 text-sm",children:m.photos})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Owner Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ownerName",children:"Full Name *"}),e.jsx(A,{id:"ownerName",placeholder:"John Doe",value:r.ownerName,onChange:s=>b("ownerName",s.target.value),className:m.ownerName?"border-red-500":""}),m.ownerName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.ownerName})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ownerEmail",children:"Email Address *"}),e.jsx(A,{id:"ownerEmail",type:"email",placeholder:"john@example.com",value:r.ownerEmail,onChange:s=>b("ownerEmail",s.target.value),className:m.ownerEmail?"border-red-500":""}),m.ownerEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.ownerEmail})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ownerPhone",children:"Phone Number *"}),e.jsx(A,{id:"ownerPhone",type:"tel",placeholder:"(555) 123-4567",value:r.ownerPhone,onChange:s=>b("ownerPhone",s.target.value),className:m.ownerPhone?"border-red-500":""}),m.ownerPhone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.ownerPhone})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ownerPreferredContact",children:"Preferred Contact Method"}),e.jsxs(Ne,{value:r.ownerPreferredContact,onValueChange:s=>b("ownerPreferredContact",s),children:[e.jsx(Pe,{children:e.jsx(Se,{})}),e.jsxs(Ae,{children:[e.jsx(te,{value:"email",children:"Email"}),e.jsx(te,{value:"phone",children:"Phone"}),e.jsx(te,{value:"text",children:"Text Message"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 pt-6 border-t flex-wrap",children:[z&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{variant:"outline",size:"lg",onClick:be,className:"min-w-[150px]",disabled:I,children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsx(N,{variant:"outline",size:"lg",onClick:async()=>{await ce(),await de(),C({title:"Refreshed",description:"Listings have been refreshed from the server."})},className:"min-w-[150px]",disabled:I||O||T,children:O||T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"}),"Refreshing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(N,{size:"lg",onClick:z?Ve:Re,className:"min-w-[200px]",disabled:M||I,children:M||I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),z?"Updating...":"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),z?"Update Listing":"Submit Listing"]})})]})]})})]})}),e.jsxs(pe,{value:"manage",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2 sm:mb-3",children:"View All Listings"}),e.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:"Browse all property listings from the website. View details, update, or delete listings."}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 flex-wrap",children:[w.length>0&&e.jsxs("p",{className:"text-xs sm:text-sm text-slate-500",children:["Total: ",e.jsx("span",{className:"font-semibold text-primary",children:w.length})," ",w.length===1?"listing":"listings"]}),i.length>0&&e.jsxs("p",{className:"text-xs sm:text-sm text-slate-500",children:["Your listings: ",e.jsx("span",{className:"font-semibold text-primary",children:i.length})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:de,disabled:T,className:"min-h-[36px]",children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),T?"Refreshing...":"Refresh"]})]})]}),T?e.jsx(P,{className:"border-2 border-dashed border-slate-200",children:e.jsxs(S,{className:"p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:"Loading all listings..."})]})}):w.length===0?e.jsx(P,{className:"border-2 border-dashed border-slate-200 bg-slate-50/50",children:e.jsxs(S,{className:"p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"text-slate-400 mb-4",children:e.jsx(F,{className:"mx-auto h-16 w-16 sm:h-20 sm:w-20"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-700 mb-2",children:"No Listings Yet"}),e.jsx("p",{className:"text-sm sm:text-base text-slate-500 mb-6",children:"Create your first property listing to get started."}),e.jsxs(N,{onClick:()=>o("list"),className:"min-h-[44px]",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create New Listing"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:w.map(s=>{const a=s.ownerEmail===y.username;return e.jsx(P,{className:`overflow-hidden transition-all duration-300 hover:shadow-xl border-2 ${G?.id===s.id?"border-primary shadow-lg ring-2 ring-primary/20":"border-slate-200 hover:border-primary/50"}`,children:e.jsxs(S,{className:"p-0",children:[e.jsxs("div",{className:"relative group",children:[s.photos&&s.photos.length>0?e.jsxs("div",{className:"h-48 sm:h-56 bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:s.photos[0].url||s.photos[0].photo_url,alt:s.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx("div",{className:"hidden absolute inset-0 flex items-center justify-center bg-slate-100",children:e.jsx(F,{className:"h-12 w-12 text-slate-400"})})]}):e.jsx("div",{className:"h-48 sm:h-56 bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:e.jsx(F,{className:"h-12 w-12 sm:h-16 sm:w-16 text-slate-400"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Z,{className:`${Ke(s.status)} shadow-lg backdrop-blur-sm`,children:s.status||"Draft"})}),s.photos&&s.photos.length>0&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs(Z,{className:"bg-black/60 text-white backdrop-blur-sm",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),s.photos.length]})})]}),e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-slate-800 line-clamp-2 mb-1.5",children:s.title||"Untitled Listing"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-600 line-clamp-2 mb-2",children:s.description||"No description available"})]}),e.jsxs("div",{className:"space-y-2 mb-4 pb-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center text-slate-600",children:[e.jsx(rs,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Address"})]}),e.jsx("span",{className:"font-semibold text-slate-800 text-right ml-2 truncate",children:s.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center text-slate-600",children:[e.jsx(he,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),e.jsx("span",{children:"Price"})]}),e.jsxs("span",{className:"font-bold text-primary",children:["$",(s.price||0).toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center text-slate-600",children:[e.jsx(as,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),e.jsxs("span",{children:[s.bedrooms||0," Bed"]})]}),e.jsxs("div",{className:"flex items-center text-slate-600",children:[e.jsx(ls,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),e.jsxs("span",{children:[s.bathrooms||0," Bath"]})]})]}),s.propertyType&&e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Type"}),e.jsx("span",{className:"font-medium text-slate-800",children:s.propertyType})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{variant:"default",size:"sm",className:"w-full min-h-[40px] bg-primary hover:bg-primary/90",onClick:()=>We(s),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"View Details"]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{variant:"outline",size:"sm",className:"w-full min-h-[40px] border-blue-200 text-blue-600 hover:bg-blue-50 hover:text-blue-700",onClick:()=>Ge(s),children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Edit Listing"]}),ie===s.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"destructive",size:"sm",className:"flex-1 min-h-[40px]",onClick:()=>Ye(s.id),disabled:H===s.id,children:H===s.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Confirm Delete"]})}),e.jsx(N,{variant:"outline",size:"sm",className:"flex-1 min-h-[40px]",onClick:()=>Y(null),disabled:H===s.id,children:"Cancel"})]}):e.jsxs(N,{variant:"outline",size:"sm",className:"w-full min-h-[40px] border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>Y(s.id),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Delete Listing"]})]})]}),(s.submittedAt||s.createdAt)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:e.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["Submitted: ",new Date(s.submittedAt||s.createdAt).toLocaleDateString()]})})]})]})},s.id)})})]})]}),ne&&e.jsx(es,{property:ne,open:!!ne,onClose:Xe})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(P,{className:"w-full max-w-md shadow-2xl",children:[e.jsxs(ee,{className:"text-center pb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(xs,{className:"h-8 w-8 text-primary"})}),e.jsx(se,{className:"text-2xl font-bold text-slate-800",children:"Property Owner Portal"}),e.jsx("p",{className:"text-slate-600",children:"Secure access for property owners only"})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"username",children:"Email Address"}),e.jsx(A,{id:"username",type:"email",placeholder:"owner@pittmetro.com",value:y.username,onChange:s=>k({...y,username:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"password",children:"Password"}),e.jsx(A,{id:"password",type:"password",placeholder:"Enter your password",value:y.password,onChange:s=>k({...y,password:s.target.value})})]})]}),e.jsxs(N,{onClick:Me,className:"w-full",size:"lg",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Access Portal"]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-slate-500",children:"Demo credentials: owner@pittmetro.com / owner123"})})]})]})})};export{Hs as default};
